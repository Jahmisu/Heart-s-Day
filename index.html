<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dear Euni...</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=Poppins:wght@300;400;500;600&family=Dancing+Script:wght@600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
      /* --- 1. GLOBAL SETUP --- */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background-color: #f3e5ab;
        background-image: radial-gradient(#f3e5ab, #d6c68b);
        font-family: "Poppins", sans-serif;
        overflow: hidden;
        position: relative;
        color: #3e2723;
      }

      body::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        box-shadow: inset 0 0 150px rgba(62, 39, 35, 0.5);
        pointer-events: none;
        z-index: 1;
      }

      /* --- 2. ENVELOPE STYLES --- */
      .envelope-wrapper {
        position: relative;
        transform: scale(1);
        transition:
          transform 0.6s ease,
          opacity 0.6s ease;
        z-index: 2;
      }

      .envelope {
        position: relative;
        width: 300px;
        height: 200px;
        background: #5d4037;
        border-radius: 0 0 5px 5px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        cursor: default; /* Not clickable */
      }

      .flap {
        position: absolute;
        top: 0;
        left: 0;
        width: 0;
        height: 0;
        border-left: 150px solid transparent;
        border-right: 150px solid transparent;
        border-top: 110px solid #795548;
        transform-origin: top;
        transition: transform 0.6s 0.2s ease-in-out;
        z-index: 5;
        pointer-events: none;
      }

      .pocket-overlay {
        position: absolute;
        width: 100%;
        height: 100%;
        border-left: 150px solid #6d4c41;
        border-right: 150px solid #6d4c41;
        border-bottom: 110px solid #5d4037;
        border-top: 90px solid transparent;
        top: 0;
        left: 0;
        z-index: 4;
        pointer-events: none;
      }

      /* --- TEASER LETTER --- */
      .letter-teaser {
        position: absolute;
        bottom: 0;
        left: 15px;
        width: 270px;
        height: 180px;
        background: #fff9c4;
        padding: 20px;
        z-index: 2;
        transition: transform 0.8s 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        border-radius: 2px;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        border: 1px solid #d7ccc8;
        box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);

        /* THE FIX: Disable clicks while inside the envelope */
        pointer-events: none;
      }

      .letter-teaser p {
        font-family: "Poppins", sans-serif;
        font-size: 13px;
        color: #5d4037;
        font-weight: 500;
        line-height: 1.6;
      }

      /* --- 3. BUTTONS --- */
      .btn-open-env {
        position: absolute;
        top: 55%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 10;
        background: #b71c1c;
        color: #fff;
        border: 3px solid #8e0000;
        padding: 0;
        border-radius: 50%;
        width: 80px;
        height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "Poppins", sans-serif;
        font-weight: 600;
        font-size: 12px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        transition: all 0.3s;
        text-transform: uppercase;
        pointer-events: auto; /* Ensure this is clickable */
      }

      .btn-open-env:hover {
        transform: translate(-50%, -50%) scale(1.1);
        background: #c62828;
      }

      .btn-read-more {
        margin-top: 15px;
        background: #5d4037;
        color: white;
        border: none;
        padding: 8px 20px;
        font-size: 12px;
        border-radius: 20px;
        cursor: pointer;
        transition: 0.3s;
        font-family: "Poppins", sans-serif;
      }

      .btn-read-more:hover {
        background: #4e342e;
        transform: scale(1.05);
      }

      /* --- 4. ANIMATIONS --- */
      .envelope-wrapper.open .flap {
        transform: rotateX(180deg);
        z-index: 1;
      }

      .envelope-wrapper.open .letter-teaser {
        transform: translateY(-90px);
        z-index: 3;
        /* THE FIX: Enable clicks ONLY when opened */
        pointer-events: auto;
      }

      .envelope-wrapper.open .btn-open-env {
        opacity: 0;
        pointer-events: none;
      }

      /* --- 5. FULL LETTER MODAL --- */
      .full-letter-container {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 90%;
        max-width: 500px;
        max-height: 90vh;
        overflow-y: auto;
        background-color: #fdf5e6;
        background-image: linear-gradient(#d7ccc8 1px, transparent 1px);
        background-size: 100% 32px;
        border: 1px solid #d7ccc8;
        box-shadow:
          0 10px 30px rgba(0, 0, 0, 0.4),
          inset 0 0 60px rgba(161, 136, 127, 0.3);
        padding: 30px 25px;
        z-index: 100;
        text-align: center;
        animation: popIn 0.8s ease;
      }

      .full-letter-container::-webkit-scrollbar {
        width: 6px;
      }
      .full-letter-container::-webkit-scrollbar-thumb {
        background: #8d6e63;
        border-radius: 3px;
      }

      @keyframes popIn {
        0% {
          opacity: 0;
          transform: translate(-50%, -40%);
        }
        100% {
          opacity: 1;
          transform: translate(-50%, -50%);
        }
      }

      .page {
        display: none;
        animation: fadeIn 0.8s;
      }
      .page.active {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .paper-content h2 {
        font-family: "Playfair Display", serif;
        color: #8e0000;
        margin-bottom: 25px;
        font-size: 1.8rem;
        background-color: rgba(253, 245, 230, 0.9);
        display: inline-block;
        padding: 0 10px;
      }

      .paper-content p {
        font-family: "Dancing Script", cursive;
        font-size: 1.5rem;
        font-weight: 600;
        color: #2c1a16;
        line-height: 32px;
        margin-bottom: 20px;
        text-align: justify;
        text-justify: inter-word;
      }

      .nav-buttons {
        margin-top: 30px;
        display: flex;
        justify-content: center;
        gap: 15px;
        padding-bottom: 10px;
        background-color: rgba(253, 245, 230, 0.8);
      }

      .nav-btn {
        background: #5d4037;
        color: #fff;
        border: none;
        padding: 10px 24px;
        border-radius: 5px;
        cursor: pointer;
        font-family: "Poppins", sans-serif;
        font-size: 13px;
        transition: 0.3s;
      }
      .nav-btn:hover {
        background: #4e342e;
        transform: translateY(-2px);
      }
      .nav-btn:disabled {
        background: #a1887f;
        cursor: not-allowed;
        transform: none;
      }

      .footer {
        position: absolute;
        bottom: 20px;
        width: 100%;
        text-align: center;
        color: #5d4037;
        font-size: 12px;
        z-index: 10;
        pointer-events: none;
        font-family: "Poppins", sans-serif;
      }

      .heart {
        position: absolute;
        bottom: -20px;
        animation: floatUp linear forwards;
        pointer-events: none;
        z-index: 0;
        opacity: 0.8;
        filter: sepia(0.4);
      }

      @keyframes floatUp {
        from {
          transform: translateY(0);
          opacity: 0.8;
        }
        to {
          transform: translateY(-120vh);
          opacity: 0;
        }
      }

      @media (max-width: 500px) {
        .envelope {
          width: 260px;
          height: 180px;
        }
        .letter-teaser {
          width: 230px;
          height: 160px;
        }
        .flap,
        .pocket-overlay {
          border-left-width: 130px;
          border-right-width: 130px;
        }
        .full-letter-container {
          width: 95%;
          padding: 25px 15px;
        }
        .paper-content p {
          font-size: 1.3rem;
          line-height: 32px;
        }
      }
    </style>
  </head>

  <body>
    <audio id="bgMusic" autoplay loop muted style="display: none">
      <source src="PaulPartohap.mp3" type="audio/mpeg" />
    </audio>

    <div class="envelope-wrapper" id="envelopeWrapper">
      <div class="envelope">
        <div class="back"></div>
        <div class="flap"></div>

        <button class="btn-open-env" onclick="openEnvelope()">
          Open<br />Here
        </button>

        <div class="letter-teaser">
          <p>
            Euni, Happy Valentine's Day! <br />
            Hope you'll take time to read it, <br />
            this for you... <br />
          </p>
          <button class="btn-read-more" onclick="showFullLetter()">
            Read More
          </button>
        </div>

        <div class="pocket-overlay"></div>
      </div>
    </div>

    <div class="full-letter-container" id="fullLetter">
      <div class="page active" id="page1">
        <div class="paper-content">
          <h2>When I Believed Love Had Passed Me By</h2>
          <p>
            For two long years, I truly believed that love wasn‚Äôt meant for me
            anymore, and that belief settled into my heart quietly but deeply,
            like a truth I had no choice but to accept. During that time, love
            felt like a chapter of my life that had already ended, something I
            could look back on but no longer step into again. I convinced myself
            that I had already felt all the love I was ever meant to feel, that
            my heart had been stretched, bruised, and tired enough to deserve
            rest rather than hope. I learned how to wake up each day relying
            only on myself, how to carry my own weight without expecting anyone
            to help, and how to smile in ways that didn‚Äôt invite questions. I
            told myself that independence was strength, that solitude was peace,
            and that wanting love again would only reopen wounds I had worked so
            hard to close. There were nights when I sat alone with my thoughts,
            replaying memories of what love once felt like‚Äîhow it made the world
            brighter, how it gave meaning to even the smallest moments. But
            instead of longing for it, I trained myself to let those memories
            pass without attachment. I told myself that love was beautiful, yes,
            but not essential, and that my life could still be complete without
            it. I filled my days with routines, responsibilities, and
            distractions, anything that would keep my heart from asking
            questions it was afraid of answering. I became good at being okay,
            even when ‚Äúokay‚Äù was just another word for numb. Yet even as I built
            this version of myself that didn‚Äôt need love, there was always a
            quiet space within me that felt unfinished. No matter how busy I
            kept myself or how logical my reasons were for giving up on love,
            something in me still recognized its absence. I would see couples
            laughing together, or hear a song that once meant something more,
            and for just a moment, my heart would ache before quickly retreating
            again. I learned how to silence that ache, how to remind myself that
            hope could be dangerous, and how to believe that some people are
            simply meant to love once, deeply, and then never again. For those
            two years, I wasn‚Äôt unhappy, but I wasn‚Äôt fully alive either. I
            existed in a careful balance between healing and protecting myself,
            choosing familiarity over possibility. Love felt distant, like
            something meant for other people, for other lives, for another
            version of me that no longer existed. I had accepted that truth so
            completely that I never questioned it anymore. And yet, in the most
            unexpected way, just when I had stopped believing that my heart
            could open again, life quietly prepared me for a love I never saw
            coming.
          </p>
        </div>
      </div>

      <div class="page" id="page2">
        <div class="paper-content">
          <h2>The Moment You Changed Everything</h2>
          <p>
            Then I met you, and everything I thought I understood about love
            slowly, gently, and beautifully unraveled. You didn‚Äôt arrive like a
            storm, demanding attention or forcing your way into my life. You
            arrived like a calm I didn‚Äôt know I needed, like a warmth that felt
            familiar even though it was new. At first, I didn‚Äôt recognize what
            was happening. I thought you were just another passing presence,
            another moment that would eventually fade. But little by little, you
            stayed, and in staying, you began to change me in ways I never
            expected. With every conversation, every shared laugh, and every
            quiet moment, you chipped away at the walls I had spent two years
            building. You made me feel seen without making me feel exposed,
            understood without demanding explanations. You listened not just to
            my words, but to the spaces between them, to the things I didn‚Äôt
            know how to say out loud. With you, I didn‚Äôt feel the need to
            pretend that I was stronger than I was. Somehow, your presence made
            vulnerability feel safe instead of frightening. You showed me that
            love doesn‚Äôt have to hurt to be real. You taught me that love can be
            patient, gentle, and steady, that it doesn‚Äôt need grand gestures to
            prove its sincerity. Through your kindness, your consistency, and
            the way you showed up without hesitation, you reminded my heart of
            things it had forgotten. You made love feel less like a risk and
            more like a gift. Slowly, without realizing it, I found myself
            hoping again, smiling more genuinely, and looking forward to moments
            simply because they included you. What amazed me most was how
            effortless it felt. There was no pressure, no fear of being too much
            or not enough. You allowed me to be exactly who I was, even with my
            scars and doubts, and you never made me feel like I had to earn your
            affection. In your presence, I learned that love doesn‚Äôt rush‚Äîit
            waits. It grows in quiet ways, in shared silences, in comfort, in
            trust. You became living proof that love truly moves in mysterious
            ways, arriving not when we demand it, but when we are ready to
            recognize it. Meeting you didn‚Äôt just bring love back into my life;
            it changed my understanding of it. You didn‚Äôt replace the love I
            once knew‚Äîyou created something entirely new, something deeper and
            more meaningful. You showed me that love can find us again, even
            after we‚Äôve convinced ourselves it never will. And in doing so, you
            gave my heart permission to believe again.
          </p>
        </div>
      </div>

      <div class="page" id="page3">
        <div class="paper-content">
          <h2>My Valentine, My Always</h2>
          <p>
            This Valentine‚Äôs Day, my heart celebrates you in ways words can
            barely contain. I don‚Äôt just celebrate the love we share, but the
            journey that led me to you‚Äîthe broken beliefs, the quiet healing,
            and the unexpected miracle of finding love again when I had stopped
            looking for it. You are not just someone I love; you are the reason
            love feels possible again, the reason my heart feels alive in ways
            it hasn‚Äôt felt in years. With you, even the simplest days carry
            meaning, and even ordinary moments feel extraordinary. Loving you
            has taught me that love is not just about passion or excitement, but
            about choosing someone every single day. It‚Äôs in the way you make me
            feel safe, the way you bring peace to my thoughts, and the way you
            remind me that I am not alone. You have become my comfort during
            quiet moments and my happiness during joyful ones. You make the
            world feel less heavy simply by being in it with me. Because of you,
            love feels like home rather than uncertainty. Thank you for loving
            me patiently, for understanding me deeply, and for seeing beauty in
            parts of me I once tried to hide. Thank you for reminding me that my
            heart was never broken beyond repair‚Äîit was simply waiting for the
            right person to treat it with care. With you, I‚Äôve learned that love
            doesn‚Äôt erase pain from the past, but it gives it meaning by showing
            us what we were healing for all along. If love is a story, then you
            are my favorite chapter‚Äîthe one that came unexpectedly but changed
            everything that followed. You are my reminder that hearts heal, that
            timing is sacred, and that love always finds its way to where it
            belongs. This Valentine‚Äôs Day, and every day after, I choose you
            with gratitude, with certainty, and with a heart that finally
            believes again. You are my Valentine, my always, and the most
            beautiful proof that love never truly leaves‚Äîit simply waits for the
            right moment to return.
          </p>
          <p style="text-align: right; margin-top: 10px">
            Yours Truly, <br />
            -Jahmisuuu
          </p>
        </div>
      </div>

      <div class="nav-buttons">
        <button class="nav-btn" id="prevBtn" onclick="changePage(-1)" disabled>
          Previous
        </button>
        <button class="nav-btn" id="nextBtn" onclick="changePage(1)">
          Next
        </button>
      </div>
    </div>

    <footer class="footer">
      <p>
        @Jahmisuuu- Happy Valentine's Day ‚Ä¢ Made with love üíï
        <button
          id="musicBtn"
          onclick="toggleMusic()"
          style="
            margin-left: 15px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            pointer-events: auto;
          "
          title="Mute/Unmute Music"
        >
          üîä
        </button>
      </p>
    </footer>

    <script>
      function openEnvelope() {
        document.getElementById("envelopeWrapper").classList.add("open");
      }

      function showFullLetter() {
        const wrapper = document.getElementById("envelopeWrapper");
        wrapper.style.opacity = "0";
        wrapper.style.transform = "scale(0.8)";

        setTimeout(() => {
          wrapper.style.display = "none";
          document.getElementById("fullLetter").style.display = "block";
        }, 600);
      }

      let currentPage = 1;
      const totalPages = 3;

      function changePage(direction) {
        document
          .getElementById(`page${currentPage}`)
          .classList.remove("active");
        currentPage += direction;
        document.getElementById(`page${currentPage}`).classList.add("active");

        document.getElementById("prevBtn").disabled = currentPage === 1;

        const nextBtn = document.getElementById("nextBtn");
        if (currentPage === totalPages) {
          nextBtn.innerText = "Close";
          nextBtn.onclick = function () {
            Swal.fire({
              title: "I Aprreciate You üíñ",
              text: "I love you so much, Euni.",
              icon: "heart",
              confirmButtonColor: "#b71c1c",
              confirmButtonText: "Hope you loved it.",
              background: "#fdf5e6",
              color: "#5d4037",
            }).then((result) => {
              if (result.isConfirmed) {
                closeAndReturnToEnvelope();
              }
            });
          };
        } else {
          nextBtn.innerText = "Next";
          nextBtn.onclick = function () {
            changePage(1);
          };
        }
      }

      function createHeart() {
        const heart = document.createElement("div");
        heart.className = "heart";
        heart.innerHTML = "‚ù§Ô∏è";
        heart.style.left = Math.random() * 100 + "vw";
        heart.style.fontSize = Math.random() * 20 + 10 + "px";
        heart.style.animationDuration = Math.random() * 3 + 2 + "s";
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 5000);
      }

      function toggleMusic() {
        const music = document.getElementById("bgMusic");
        const btn = document.getElementById("musicBtn");
        if (music.muted) {
          music.muted = false;
          music.play();
          btn.textContent = "üîä";
        } else {
          music.muted = true;
          btn.textContent = "üîá";
        }
      }

      // Try to autoplay music
      document.addEventListener("DOMContentLoaded", function () {
        const music = document.getElementById("bgMusic");
        music.muted = false;
        music.play().catch(function () {
          console.log("Autoplay prevented - user interaction may be required");
        });
      });

      // Also try to play on first user interaction
      document.addEventListener(
        "click",
        function playOnClick() {
          const music = document.getElementById("bgMusic");
          if (music.paused) {
            music.muted = false;
            music.play();
            document.removeEventListener("click", playOnClick);
          }
        },
        { once: false },
      );

      setInterval(createHeart, 300);
    </script>
  </body>
</html>
